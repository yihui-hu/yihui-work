---
import "@fontsource/fragment-mono";
import "../styles/global.scss";
import "../styles/sidebar.scss";
import "../styles/notes.scss";

interface Note {
  title: string;
  date: string;
  url: string;
}

const modules = import.meta.glob("./notes/*.md");
const notes: Note[] = [];

// for filtering testing / misc. notes
const hidden: string[] = ["README", "Markdown Stress Test"];

for (const path in modules) {
  await modules[path]().then((mod: any) => {
    if (!hidden.includes(mod.frontmatter.title)) {
      const note: Note = {
        title: mod.frontmatter.title,
        date: mod.frontmatter.pubDate.split("T")[0],
        url: mod.url,
      };
      notes.push(note);
    }
  });
}
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="viewport" content="width=device-width" />
    <meta name="description" content="Links to corners of the web" />
    <title>Links</title>
  </head>
  <body>
    <div class="sidebar-container">
      <span class="name">
        <a class="name-link" href="/">Yihui Hu</a>
      </span>
      <span style={{ maxWidth: "350px" }}>
        An ongoing collection of my notes written in <a
          class="wavy-link"
          href="https://github.com/yihui-hu/notes"
          target="_blank">Obsidian</a
        >.
      </span>
      <div class="notes-list">
        {
          notes.map((note) => {
            return (
              <div class="notes-info">
                <span class="notes-date">{note.date}</span>
                <a href={note.url}>{note.title}</a>
              </div>
            );
          })
        }
      </div>
      <div style={{ paddingBottom: "55px" }}>
        <a href="/">‚Üê Home</a>
      </div>
    </div>
  </body>
</html>
